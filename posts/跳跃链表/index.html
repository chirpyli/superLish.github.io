<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="跳跃链表" /><meta name="author" content="lisheng" /><meta property="og:locale" content="en_US" /><meta name="description" content="跳跃链表的概念 跳跃链表是有序链表的一个变种，在一个有序链表中，查找一个链表中的元素需要进行一次遍历，时间复杂度为O(n)，为了加快查找的过程，能够跳过某些元素呢？一个思路就是牺牲一定的空间换时间，对有序链表建立类似索引的结构加快查找过程，跳跃链表基本上就是通过维护一个多层次的链表，每一层链表中的元素是前一层链表元素的子集，搜索时，最开始在最稀疏的层次进行搜索，直至需要查找的元素在该层两个相邻元素中间，这时，将跳转到下一个层次，重复刚才的搜索，直到找到需要查找的元素为止。" /><meta property="og:description" content="跳跃链表的概念 跳跃链表是有序链表的一个变种，在一个有序链表中，查找一个链表中的元素需要进行一次遍历，时间复杂度为O(n)，为了加快查找的过程，能够跳过某些元素呢？一个思路就是牺牲一定的空间换时间，对有序链表建立类似索引的结构加快查找过程，跳跃链表基本上就是通过维护一个多层次的链表，每一层链表中的元素是前一层链表元素的子集，搜索时，最开始在最稀疏的层次进行搜索，直至需要查找的元素在该层两个相邻元素中间，这时，将跳转到下一个层次，重复刚才的搜索，直到找到需要查找的元素为止。" /><link rel="canonical" href="https://superlish.github.io/superLish.github.io/posts/%E8%B7%B3%E8%B7%83%E9%93%BE%E8%A1%A8/" /><meta property="og:url" content="https://superlish.github.io/superLish.github.io/posts/%E8%B7%B3%E8%B7%83%E9%93%BE%E8%A1%A8/" /><meta property="og:site_name" content="ChirpyLi" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-01-14T08:55:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="跳跃链表" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@lisheng" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"跳跃链表的概念 跳跃链表是有序链表的一个变种，在一个有序链表中，查找一个链表中的元素需要进行一次遍历，时间复杂度为O(n)，为了加快查找的过程，能够跳过某些元素呢？一个思路就是牺牲一定的空间换时间，对有序链表建立类似索引的结构加快查找过程，跳跃链表基本上就是通过维护一个多层次的链表，每一层链表中的元素是前一层链表元素的子集，搜索时，最开始在最稀疏的层次进行搜索，直至需要查找的元素在该层两个相邻元素中间，这时，将跳转到下一个层次，重复刚才的搜索，直到找到需要查找的元素为止。","url":"https://superlish.github.io/superLish.github.io/posts/%E8%B7%B3%E8%B7%83%E9%93%BE%E8%A1%A8/","headline":"跳跃链表","dateModified":"2020-01-14T08:55:00+08:00","@type":"BlogPosting","datePublished":"2020-01-14T08:55:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://superlish.github.io/superLish.github.io/posts/%E8%B7%B3%E8%B7%83%E9%93%BE%E8%A1%A8/"},"author":{"@type":"Person","name":"lisheng"},"@context":"https://schema.org"}</script><title>跳跃链表 | ChirpyLi</title><link rel="shortcut icon" href="/superLish.github.io/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/superLish.github.io/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/superLish.github.io/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/superLish.github.io/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/superLish.github.io/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/superLish.github.io/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/superLish.github.io/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/superLish.github.io/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/superLish.github.io/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/superLish.github.io/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/superLish.github.io/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/superLish.github.io/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/superLish.github.io/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/superLish.github.io/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/superLish.github.io/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/superLish.github.io/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/superLish.github.io/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/superLish.github.io/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/superLish.github.io/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/superLish.github.io/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/superLish.github.io/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/superLish.github.io/assets/js/dist/post.min.js"></script> <script defer src="/superLish.github.io/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/superLish.github.io/" alt="avatar" class="mx-auto"> <img src="https://cdn.jsdelivr.net/gh/cotes2020/chirpy-images/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/superLish.github.io/">ChirpyLi</a></div><div class="site-subtitle font-italic">love yourself</div></div><ul class="w-100"><li class="nav-item"> <a href="/superLish.github.io/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/superLish.github.io/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/superLish.github.io/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/superLish.github.io/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/superLish.github.io/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/superLish" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/superLish.github.io/"> Posts </a> </span> <span>跳跃链表</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>跳跃链表</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Jan 14, 2020, 8:55 AM +0800" > Jan 14, 2020 <i class="unloaded">2020-01-14T08:55:00+08:00</i> </span> by <span class="author"> lisheng </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2151 words">11 min</span></div></div><div class="post-content"><h3 id="跳跃链表的概念">跳跃链表的概念</h3><p>跳跃链表是有序链表的一个变种，在一个有序链表中，查找一个链表中的元素需要进行一次遍历，时间复杂度为<code class="language-plaintext highlighter-rouge">O(n)</code>，为了加快查找的过程，能够跳过某些元素呢？一个思路就是牺牲一定的空间换时间，对有序链表建立类似索引的结构加快查找过程，跳跃链表基本上就是通过维护一个多层次的链表，每一层链表中的元素是前一层链表元素的子集，搜索时，最开始在最稀疏的层次进行搜索，直至需要查找的元素在该层两个相邻元素中间，这时，将跳转到下一个层次，重复刚才的搜索，直到找到需要查找的元素为止。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/superLish.github.io/assets/img/data-structure/skiplist.png" alt="image" /></p><p><a href="https://github.com/superLish/data-structure/blob/master/list/skiplists.pdf">原论文Skip Lists: A Probabilistic Alternative to Balanced Trees</a></p><h3 id="跳跃链表的构建思路">跳跃链表的构建思路</h3><p>如果给定一个固定的有序链表，构造跳跃链表的话，思路非常简单，就是每一层都取上一层的<code class="language-plaintext highlighter-rouge">1/2</code>个元素就可以了（例如，按奇偶，每次都取第偶数个元素作为下一层元素……），这样查找就相当于二分查找的过程，查找一个元素的时间复杂度变为了<code class="language-plaintext highlighter-rouge">log(n)</code>。但是实际应用中，有序链表往往不是固定元素个数的，会动态的增删，这种静态的构建过程就不合适了，那该怎么办呢？</p><p>可以看到，跳跃链表构建索引的关键是每一层都取上一层的部分元素作为该层的元素，即第<code class="language-plaintext highlighter-rouge">i</code>层的元素按某个固定的概率<code class="language-plaintext highlighter-rouge">p</code>（例如<code class="language-plaintext highlighter-rouge">1/2</code>或<code class="language-plaintext highlighter-rouge">1/4</code>）出现在第<code class="language-plaintext highlighter-rouge">i+1</code>层中。可通过这个概率<code class="language-plaintext highlighter-rouge">p</code>值对空间和时间进行平衡，<code class="language-plaintext highlighter-rouge">p</code>越大，占用空间越多。所以，构建的思路就是在插入一个新的元素时，随机的生成该元素的层数，算法描述如下：</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">randomLevel</span><span class="p">()</span>
    <span class="n">lvl</span> <span class="o">:=</span> <span class="mi">1</span>
    <span class="c1">// random() return a random value in [0..1) </span>
    <span class="k">while</span> <span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">p</span> <span class="o">&amp;&amp;</span> <span class="n">lvl</span> <span class="o">&lt;</span> <span class="n">MaxLevel</span> <span class="k">do</span>
        <span class="n">lvl</span> <span class="o">:=</span> <span class="n">lvl</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">lvl</span>
</pre></table></code></div></div><p>即，层次越高，概率越低，但层数也不能太高，太高了无意义，一般根据元素的个数<code class="language-plaintext highlighter-rouge">n</code>计算<code class="language-plaintext highlighter-rouge">MaxLevel = log(n)</code>作为最高层数。这样，跳跃链表就适应动态变化的情况了。</p><h3 id="跳跃链表的插入查找删除">跳跃链表的插入、查找、删除</h3><h4 id="查找">查找</h4><p>查找的思路就是先在最上层查找，找到不到再转向下一层继续查找，这样就可以跳过很多元素，缩小查找范围。算法描述如下：</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">Search</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">searchKey</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">header</span>  <span class="c1">// loop invariant: x-&gt;key &lt; searchKey</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="n">downto</span> <span class="mi">1</span> <span class="k">do</span>    <span class="c1">// downto的意思是从最高层，每次下降一层</span>
        <span class="k">while</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&lt;</span> <span class="n">searchKey</span> <span class="k">do</span>
            <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="c1">// x-&gt;key &lt; searchKey &lt;= x-&gt;forward[1]-&gt;key</span>
    <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">=</span> <span class="n">searchKey</span> <span class="n">then</span> <span class="k">return</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">value</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">failure</span>
</pre></table></code></div></div><h4 id="插入">插入</h4><p>插入的关键步骤是随机决定节点层数，算法前面已经描述过，与普通链表不同的是跳跃链表是多层的，所以确定层数后每一层都需要插入该元素。 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/superLish.github.io/assets/img/data-structure/skiplist_insert.png" alt="image" /></p><p>插入算法描述如下：</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="n">Insert</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">searchKey</span><span class="p">,</span> <span class="n">newValue</span><span class="p">)</span>
    <span class="n">local</span> <span class="n">update</span><span class="p">[</span><span class="mi">1</span><span class="p">..</span> <span class="n">MaxLevel</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">leader</span>
    <span class="k">for</span> <span class="n">i</span><span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="n">downto</span> <span class="mi">1</span> <span class="k">do</span>
        <span class="k">while</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&lt;</span> <span class="n">searchKey</span> <span class="k">do</span>
            <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="c1">// x-&gt;key &lt; searchKey &lt;= x-&gt;forward[1]-&gt;key</span>
        <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">x</span>  <span class="c1">//这里是找出这个元素在每一层的前驱节点</span>
    <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">=</span> <span class="n">searchKey</span> <span class="n">then</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">:=</span> <span class="n">newValue</span>
    <span class="k">else</span>
        <span class="n">lvl</span> <span class="o">:=</span> <span class="n">randomLevel</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">lvl</span> <span class="o">&gt;</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="n">then</span>
            <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">lvl</span> <span class="k">do</span>
                <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">header</span>
            <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">:=</span> <span class="n">lvl</span>
        <span class="n">x</span> <span class="o">:=</span> <span class="n">makeNode</span><span class="p">(</span><span class="n">lvl</span><span class="p">,</span> <span class="n">searchKey</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">level</span> <span class="k">do</span>  <span class="c1">// 这里与普通链表插入节点操作类似，只不过是每层都要插入</span>
            <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">x</span> 
</pre></table></code></div></div><h4 id="删除">删除</h4><p>删除操作与普通链表删除操作类似，不同的地方在于找到该元素后要每一层都做删除操作，算法描述如下：</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="n">Delete</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">searchKey</span><span class="p">)</span>
    <span class="n">local</span> <span class="n">update</span><span class="p">[</span><span class="mi">1</span><span class="p">..</span><span class="n">MaxLevel</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">header</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="n">downto</span> <span class="mi">1</span> <span class="k">do</span>
        <span class="k">while</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&lt;</span> <span class="n">searchKey</span> <span class="k">do</span>
            <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">x</span>
    <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">=</span> <span class="n">searchKey</span> <span class="n">then</span>
        <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="k">do</span>
            <span class="k">if</span> <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="n">neq</span> <span class="n">x</span> <span class="n">then</span> <span class="k">break</span>
            <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">foreard</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">free</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="n">and</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">header</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span><span class="p">]</span> <span class="o">=</span><span class="n">NIL</span> <span class="k">do</span> 
            <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">:=</span> <span class="n">list</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">-</span><span class="mi">1</span>
</pre></table></code></div></div><h3 id="代码实现">代码实现</h3><p>代码实现时，上面的算法描述的前提是有一个最小key的header节点和最大key的tail节点，具体实现时还需注意K的最大最小值及比较操作。 <a href="https://github.com/superLish/data-structure/blob/master/list/skiplist.cpp">skiplist.cpp</a></p><div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
</pre><td class="rouge-code"><pre><span class="cp">#include&lt;iostream&gt;
#include&lt;cstdlib&gt;
#include&lt;ctime&gt;
#include&lt;random&gt;
#include&lt;cmath&gt;
#include&lt;climits&gt;
#include&lt;vector&gt;
#include&lt;cassert&gt;
#include&lt;algorithm&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">MAX_LEVEL</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>   <span class="c1">// 用户定义的最大层数</span>
<span class="k">const</span> <span class="kt">float</span> <span class="n">P</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>        <span class="c1">// 用户设置的概率P</span>

<span class="c1">//跳跃列表节点类</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">SkipListNode</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">SkipListNode</span><span class="p">()</span> <span class="p">{}</span>
    <span class="n">SkipListNode</span><span class="p">(</span><span class="n">K</span> <span class="n">key</span><span class="p">,</span> <span class="n">V</span> <span class="n">value</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">);</span>
    <span class="n">K</span> <span class="n">key</span><span class="p">;</span>
    <span class="n">V</span> <span class="n">value</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">SkipListNode</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;*</span> <span class="n">NodePtr</span><span class="p">;</span>
    <span class="n">NodePtr</span> <span class="n">forward</span><span class="p">[</span><span class="n">MAX_LEVEL</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="n">SkipListNode</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">SkipListNode</span><span class="p">(</span><span class="n">K</span> <span class="n">key</span><span class="p">,</span> <span class="n">V</span> <span class="n">value</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">)</span><span class="o">:</span><span class="n">key</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">level</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 跳跃列表类</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">SkipList</span> <span class="p">{</span>
<span class="nl">public:</span>
<span class="k">typedef</span> <span class="n">SkipListNode</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;*</span> <span class="n">NodePtr</span><span class="p">;</span>

    <span class="n">SkipList</span><span class="p">();</span>
    <span class="n">SkipList</span><span class="p">(</span><span class="n">NodePtr</span> <span class="n">header</span><span class="p">,</span> <span class="n">NodePtr</span> <span class="n">tail</span><span class="p">);</span>
    <span class="o">~</span><span class="n">SkipList</span><span class="p">();</span>
    <span class="n">V</span><span class="o">*</span> <span class="n">search</span><span class="p">(</span><span class="k">const</span> <span class="n">K</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">);</span>
    <span class="kt">void</span> <span class="n">insert</span><span class="p">(</span><span class="k">const</span> <span class="n">K</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">,</span><span class="k">const</span> <span class="n">V</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">);</span>
    <span class="kt">void</span> <span class="n">remove</span><span class="p">(</span><span class="k">const</span> <span class="n">K</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">);</span>
    <span class="kt">void</span> <span class="n">print</span><span class="p">();</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">randomLevel</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
    <span class="n">NodePtr</span> <span class="n">header</span><span class="p">;</span>           <span class="c1">// header节点</span>
    <span class="n">NodePtr</span> <span class="n">tail</span><span class="p">;</span>             <span class="c1">// tail节点</span>
    <span class="kt">int</span> <span class="n">level</span><span class="p">;</span>                <span class="c1">// 当前层数</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>                    <span class="c1">// 节点数量</span>
<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="kt">void</span> <span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">print</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"level="</span> <span class="o">&lt;&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">&lt;&lt;</span> <span class="s">" count="</span> <span class="o">&lt;&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"level"</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="s">":"</span><span class="p">;</span>
        <span class="n">NodePtr</span> <span class="n">pNode</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">pNode</span> <span class="o">!=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">tail</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"&lt;"</span> <span class="o">&lt;&lt;</span> <span class="n">pNode</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">pNode</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="s">"&gt;  "</span><span class="p">;</span>
            <span class="n">pNode</span> <span class="o">=</span> <span class="n">pNode</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> 
        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">SkipList</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">tail</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">SkipList</span><span class="p">(</span><span class="n">NodePtr</span> <span class="n">header</span><span class="p">,</span> <span class="n">NodePtr</span> <span class="n">tail</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">tail</span> <span class="o">=</span> <span class="n">tail</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_LEVEL</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tail</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::~</span><span class="n">SkipList</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">NodePtr</span> <span class="n">p</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">NodePtr</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="k">delete</span> <span class="n">tmp</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="kt">int</span> <span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">randomLevel</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">lvl</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">maxLevel</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">log</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">rand</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">&lt;</span> <span class="n">P</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">&amp;&amp;</span> <span class="n">lvl</span> <span class="o">&lt;</span> <span class="n">min</span><span class="p">(</span><span class="n">maxLevel</span><span class="p">,</span> <span class="n">MAX_LEVEL</span><span class="p">))</span> <span class="p">{</span>
        <span class="o">++</span><span class="n">lvl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">lvl</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="n">V</span><span class="o">*</span> <span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">search</span><span class="p">(</span><span class="k">const</span> <span class="n">K</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NodePtr</span> <span class="n">x</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&lt;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>      
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">==</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">&amp;</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="kt">void</span> <span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">insert</span><span class="p">(</span><span class="k">const</span> <span class="n">K</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">,</span><span class="k">const</span> <span class="n">V</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 找到待调整的项</span>
    <span class="n">NodePtr</span> <span class="n">update</span><span class="p">[</span><span class="n">MAX_LEVEL</span><span class="p">];</span>
    <span class="n">NodePtr</span> <span class="n">ptr</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">ptr</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&lt;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">ptr</span> <span class="o">=</span> <span class="n">ptr</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptr</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">update</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">==</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">update</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 进行节点加入操作（与链表插入类似）</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">lvl</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">randomLevel</span><span class="p">();</span>        <span class="c1">// 随机生成该节点层数</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">lvl</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">lvl</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">=</span> <span class="n">lvl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">NodePtr</span> <span class="n">x</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SkipListNode</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lvl</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">K</span><span class="p">,</span> <span class="k">class</span> <span class="nc">V</span><span class="p">&gt;</span>
<span class="kt">void</span> <span class="n">SkipList</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;::</span><span class="n">remove</span><span class="p">(</span><span class="k">const</span> <span class="n">K</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NodePtr</span> <span class="n">update</span><span class="p">[</span><span class="n">MAX_LEVEL</span><span class="p">];</span>
    <span class="n">NodePtr</span> <span class="n">x</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">&lt;</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">key</span> <span class="o">==</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">x</span><span class="p">)</span> 
                <span class="k">break</span><span class="p">;</span>
            <span class="n">update</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">delete</span> <span class="n">x</span><span class="p">;</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span><span class="o">--</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">header</span><span class="o">-&gt;</span><span class="n">forward</span><span class="p">[</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">tail</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="o">-&gt;</span><span class="n">level</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> 

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">srand</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">nullptr</span><span class="p">));</span>
    <span class="n">SkipListNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">header</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SkipListNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">SkipListNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">tail</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SkipListNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">INT_MAX</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">SkipList</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;*</span> <span class="n">pSkiplist</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SkipList</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">tail</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">121</span><span class="p">,</span> <span class="mi">121</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">118</span><span class="p">,</span> <span class="mi">118</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">print</span><span class="p">();</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">v</span> <span class="o">=</span> <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">search</span><span class="p">(</span><span class="mi">121</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"value is :"</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">remove</span><span class="p">(</span><span class="mi">118</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">print</span><span class="p">();</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">11860</span><span class="p">,</span> <span class="mi">1180</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">11850</span><span class="p">,</span> <span class="mi">1180</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">11840</span><span class="p">,</span> <span class="mi">1180</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">11830</span><span class="p">,</span> <span class="mi">1180</span><span class="p">);</span>
    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">insert</span><span class="p">(</span><span class="mi">11820</span><span class="p">,</span> <span class="mi">1180</span><span class="p">);</span>

    <span class="n">pSkiplist</span><span class="o">-&gt;</span><span class="n">print</span><span class="p">();</span>

    <span class="k">delete</span> <span class="n">pSkiplist</span><span class="p">;</span>

<span class="p">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/superLish.github.io/categories/cs/'>CS</a>, <a href='/superLish.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/'>数据结构与算法</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/superLish.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="post-tag no-text-decoration" >数据结构</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/superLish.github.io/posts/%E6%97%A0%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E8%BF%94%E5%9B%9E%E7%AC%ACk%E5%A4%A7%E7%9A%84%E6%95%B0/">算法题：无序数组中返回第k大的数.md</a><li><a href="/superLish.github.io/posts/%E6%8E%92%E5%BA%8F/">排序</a><li><a href="/superLish.github.io/posts/%E7%BD%91%E7%BB%9C%E9%94%99%E8%AF%AF-Destination_unreachable-Host_administratively_prohibited/">网络错误:Destination_unreachable:Host_administratively_prohibited</a><li><a href="/superLish.github.io/posts/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/">TCP三次握手与四次分手</a><li><a href="/superLish.github.io/posts/TCP%E7%9A%84%E5%B7%A5%E4%BD%9C%E9%80%BB%E8%BE%91/">谈谈TCP</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/superLish.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a> <a class="post-tag" href="/superLish.github.io/tags/rust/">Rust</a> <a class="post-tag" href="/superLish.github.io/tags/crypto/">crypto</a> <a class="post-tag" href="/superLish.github.io/tags/blockchain/">Blockchain</a> <a class="post-tag" href="/superLish.github.io/tags/tcp-ip/">TCP/IP</a> <a class="post-tag" href="/superLish.github.io/tags/elk/">ELK</a> <a class="post-tag" href="/superLish.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a> <a class="post-tag" href="/superLish.github.io/tags/linux/">linux</a> <a class="post-tag" href="/superLish.github.io/tags/c/">C</a> <a class="post-tag" href="/superLish.github.io/tags/ethereum/">Ethereum</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/superLish.github.io/posts/%E9%98%9F%E5%88%97%E7%9A%84%E5%AE%9E%E7%8E%B0/"><div class="card-body"> <span class="timeago small" > Feb 14, 2015 <i class="unloaded">2015-02-14T08:55:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>队列的实现</h3><div class="text-muted small"><p> 队列 队列的核心性质就是先入先出，类似于排队，在涉及到很多调度方面的问题的时候，比如线程池的任务调度等，每个工作线程从任务队列中取任务执行。还有一种队列经常会用到，那就是优先队列，优先队列的内容放到了堆那部分去总结，因为优先队列的实现底层就是堆。 队列是一种先入先出的数据结构，其操作与栈类似。有如下操作： clear() —— 清空队列 empty() —— 判断队列是否为空 ...</p></div></div></a></div><div class="card"> <a href="/superLish.github.io/posts/%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%98%9F%E5%88%97/"><div class="card-body"> <span class="timeago small" > Jan 14, 2016 <i class="unloaded">2016-01-14T08:55:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>两个栈实现一个队列</h3><div class="text-muted small"><p> 问题：如何用两个栈实现一个对列的功能？ 思路：从栈A入队列，从栈B出队列。（队列的2个最重要的操作，入队列，出队列。） 入队列：从栈A入队列。 出队列：分两种情况 如果栈B不为空，直接弹出。 如果栈B为空，将栈A中的数据全部弹入栈B中，再从栈B弹出数据 代码实现如下： //2个栈实现一个队列 #include&lt;stack&...</p></div></div></a></div><div class="card"> <a href="/superLish.github.io/posts/%E5%A0%86/"><div class="card-body"> <span class="timeago small" > Jun 1, 2020 <i class="unloaded">2020-06-01T08:55:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>堆</h3><div class="text-muted small"><p> 堆 堆是一种特别的树状数据结构。若满足以下特性，即可称为堆：“给定堆中任意节点P和C，若P是C的父节点，那么P的值会小于等于（或大于等于）C的值”。若父节点的值恒小于等于子节点的值，此堆称为最小堆；反之，称为最大堆。 通常最用的是二叉堆，为二叉树的一种，有以下性质： 任意节点小于等于（或大于等于）它的子节点，最小元（或最大元）在堆的根上。 堆总是一颗完全树。即除了最底层，其他层的...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/superLish.github.io/posts/%E5%AF%B9%E5%85%B1%E8%AF%86%E7%AE%97%E6%B3%95%E7%9A%84%E8%8B%A5%E5%B9%B2%E6%80%9D%E8%80%83/" class="btn btn-outline-primary" prompt="Older"><p>对共识算法的若干思考</p></a> <a href="/superLish.github.io/posts/leveldb/" class="btn btn-outline-primary" prompt="Newer"><p>leveldb设计思路</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/superLish">lisheng</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/superLish.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a> <a class="post-tag" href="/superLish.github.io/tags/rust/">Rust</a> <a class="post-tag" href="/superLish.github.io/tags/crypto/">crypto</a> <a class="post-tag" href="/superLish.github.io/tags/blockchain/">Blockchain</a> <a class="post-tag" href="/superLish.github.io/tags/tcp-ip/">TCP/IP</a> <a class="post-tag" href="/superLish.github.io/tags/elk/">ELK</a> <a class="post-tag" href="/superLish.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a> <a class="post-tag" href="/superLish.github.io/tags/linux/">linux</a> <a class="post-tag" href="/superLish.github.io/tags/c/">C</a> <a class="post-tag" href="/superLish.github.io/tags/ethereum/">Ethereum</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/superLish.github.io/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://superLish.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
